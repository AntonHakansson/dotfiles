#+TITLE: Dotfiles Everywhere
#+AUTHOR: Anton Håkansson
#+BABEL: :cache yes
#+PROPERTY: header-args :mkdirp yes

* Colors
# Based off: https://raw.githubusercontent.com/bigardone/emacs-doom-theme/master/doom-one-theme.el

#+NAME: colors
| Name                   | GUI       | TERMINAL  |
|------------------------+-----------+-----------|
| bg                     | "#282c34" | nil       |
| bg-alt                 | "#21242b" | nil       |
| fg                     | "#bbc2cf" | "#bfbfbf" |
| fg-alt                 | "#5B6268" | "#2d2d2d" |
| grey                   | "#3f444a" | "#3f3f3f" |
| red                    | "#ff6c6b" | "#ff6655" |
| orange                 | "#da8548" | "#dd8844" |
| green                  | "#98be65" | "#99bb66" |
| teal                   | "#4db5bd" | "#44b9b1" |
| yellow                 | "#ECBE7B" | "#ECBE7B" |
| blue                   | "#51afef" | "#51afef" |
| dark-blue              | "#2257A0" | "#2257A0" |
| magenta                | "#c678dd" | "#c678dd" |
| violet                 | "#a9a1e1" | "#a9a1e1" |
| cyan                   | "#46D9FF" | "#46D9FF" |
| dark-cyan              | "#5699AF" | "#5699AF" |
| black                  | "#1B2229" | "#000000" |
| white                  | "#DFDFDF" | "#dfdfdf" |
| base0                  | "#1B2229" | "#000000" |
| base1                  | "#1c1f24" | "#1e1e1e" |
| base2                  | "#202328" | "#2e2e2e" |
| base3                  | "#23272e" | "#262626" |
| base4                  | "#3f444a" | "#3f3f3f" |
| base5                  | "#5B6268" | "#525252" |
| base6                  | "#73797e" | "#6b6b6b" |
| base7                  | "#9ca0a4" | "#979797" |
| base8                  | "#DFDFDF" | "#dfdfdf" |
| highlight              | "#51afef" | "#51afef" |
| vertical-bar           | "#191b20" | "#1b1b1b" |
| selection              | "#2257A0" | "#2257A0" |
| builtin                | "#c678dd" | "#c678dd" |
| comments               | "#5B6268" | "#525252" |
| doc-comments           | "#83898d" | "#7d7d7d" |
| constants              | "#a9a1e1" | "#a9a1e1" |
| functions              | "#c678dd" | "#c678dd" |
| keywords               | "#51afef" | "#51afef" |
| methods                | "#46D9FF" | "#46D9FF" |
| operators              | "#51afef" | "#51afef" |
| type                   | "#ECBE7B" | "#ECBE7B" |
| strings                | "#98be65" | "#99bb66" |
| variables              | "#dcaeea" | "#dcaeea" |
| numbers                | "#da8548" | "#dd8844" |
| region                 | "#42444a" | "#6c6c6c" |
| error                  | "#ff6c6b" | "#ff6655" |
| warning                | "#ECBE7B" | "#ECBE7B" |
| success                | "#98be65" | "#99bb66" |
| vc-modified            | "#da8548" | "#dd8844" |
| vc-added               | "#98be65" | "#99bb66" |
| vc-deleted             | "#ff6c6b" | "#ff6655" |
| hidden                 | "#282c34" | "black"   |
| modeline-fg            | "#bbc2cf" | "#bfbfbf" |
| modeline-fg-alt        | "#5B6268" | "#525252" |
| modeline-bg            | "#1c1e24" | "black"   |
| modeline-bg-l          | "#1d2026" | "black"   |
| modeline-bg-inactive   | "#1d2026" | nil       |
| modeline-bg-inactive-l | "#21242b" | "#1e1e1e" |

#+NAME: color
#+begin_src elisp :var c="bg" lookup-colors=colors
(map-some (lambda (k v) (if (equal k c) (car v))) lookup-colors)
#+end_src

#+RESULTS: color
: #282c34

#+NAME: lighten
#+begin_src elisp :var c="bg" lookup-colors=colors :noweb yes
(doom-lighten <<color>> 0.1)
#+end_src

#+RESULTS: lighten
: #3d4148

#+NAME: darken
#+begin_src elisp :var c="bg" lookup-colors=colors :noweb yes
(doom-darken <<color>> 0.1)
#+end_src

#+RESULTS: darken
: #24272e

* Generate Wallpaper
Run this to generate wallpaper based on our color-scheme

#+begin_src sh :var color=color(c="bg-alt")
magick -size 1920x1080 canvas:$color ~/.config/wall.png
setbg
#+end_src

#+RESULTS:

* Profile
:PROPERTIES:
:header-args: :tangle ~/.profile :comments no :cache yes :mkdirp yes
:END:

Profile file. Runs on login. Environmental variables are set here.

** Path
#+begin_src sh
export PATH="$PATH:$HOME/.nimble/bin/:/opt/piavpn/bin:/storage/bin/:$(du "$HOME/.local/bin/" | cut -f2 | tr '\n' ':' | sed 's/:*$//')"
#+end_src

** Default Programs
#+begin_src sh
export EDITOR="nvim"
export TERMINAL="alacritty"
export BROWSER="brave"
export READER="zathura"
#+end_src

** Move Configs to =~/.config/=
#+begin_src sh
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"
#export XAUTHORITY="$XDG_RUNTIME_DIR/Xauthority" # This line will break some DMs.
export NOTMUCH_CONFIG="${XDG_CONFIG_HOME:-$HOME/.config}/notmuch-config"
export GTK2_RC_FILES="${XDG_CONFIG_HOME:-$HOME/.config}/gtk-2.0/gtkrc-2.0"
export SPACEMACSDIR="${XDG_CONFIG_HOME:-$HOME/.config}/spacemacs"
export LESSHISTFILE="-"
export WGETRC="${XDG_CONFIG_HOME:-$HOME/.config}/wget/wgetrc"
export INPUTRC="${XDG_CONFIG_HOME:-$HOME/.config}/inputrc"
export ZDOTDIR="${XDG_CONFIG_HOME:-$HOME/.config}/zsh"
#export ALSA_CONFIG_PATH="$XDG_CONFIG_HOME/alsa/asoundrc" let pulseaudio configure this
#export GNUPGHOME="$XDG_DATA_HOME/gnupg"
export WINEPREFIX="${XDG_DATA_HOME:-$HOME/.local/share}/wineprefixes/default"
export KODI_DATA="${XDG_DATA_HOME:-$HOME/.local/share}/kodi"
export PASSWORD_STORE_DIR="${XDG_DATA_HOME:-$HOME/.local/share}/password-store"
export TMUX_TMPDIR="$XDG_RUNTIME_DIR"
export ANDROID_SDK_HOME="${XDG_CONFIG_HOME:-$HOME/.config}/android"
export CARGO_HOME="${XDG_DATA_HOME:-$HOME/.local/share}/cargo"
#+end_src

** =Less= Settings

#+begin_src sh
export LESS=-R
export LESS_TERMCAP_mb="$(printf '%b' '[1;31m')"
export LESS_TERMCAP_md="$(printf '%b' '[1;36m')"
export LESS_TERMCAP_me="$(printf '%b' '[0m')"
export LESS_TERMCAP_so="$(printf '%b' '[01;44;33m')"
export LESS_TERMCAP_se="$(printf '%b' '[0m')"
export LESS_TERMCAP_us="$(printf '%b' '[1;32m')"
export LESS_TERMCAP_ue="$(printf '%b' '[0m')"
export LESSOPEN="| /usr/bin/highlight -O ansi %s 2>/dev/null"
#+end_src

** Other Program Settings
#+begin_src sh
export DICS="/usr/share/stardict/dic/"
export SUDO_ASKPASS="$HOME/.local/bin/dmenupass"
export FZF_DEFAULT_OPTS="--layout=reverse --height 40%"
# export QT_QPA_PLATFORMTHEME="gtk2"	# Have QT use gtk2 theme.
export QT_QPA_PLATFORMTHEME="qt5ct"	# Have QT use custom theme
export MOZ_USE_XINPUT2="1"		# Mozilla smooth scrolling/touchpads.
export _JAVA_AWT_WM_NONREPARENTING=1    # fixes grey screen of intellij / java programs
#+end_src
** =LF= Terminal File Browser Icons

This requires [[http://nerdfonts.com/][Nerd Font]].

#+begin_src sh
export LF_ICONS="\
tw=:\
st=:\
ow=:\
dt=:\
di=:\
fi=:\
ln=:\
or=:\
ex=:\
*.c=:\
*.cc=:\
*.clj=:\
*.coffee=:\
*.cpp=:\
*.css=:\
*.d=:\
*.dart=:\
*.erl=:\
*.exs=:\
*.fs=:\
*.go=:\
*.h=:\
*.hh=:\
*.hpp=:\
*.hs=:\
*.html=:\
*.java=:\
*.jl=:\
*.js=:\
*.json=:\
*.lua=:\
*.md=:\
*.php=:\
*.pl=:\
*.pro=:\
*.py=:\
*.rb=:\
*.rs=:\
*.scala=:\
*.ts=:\
*.vim=:\
*.cmd=:\
*.ps1=:\
*.sh=:\
*.bash=:\
*.zsh=:\
*.fish=:\
*.tar=:\
*.tgz=:\
*.arc=:\
*.arj=:\
*.taz=:\
*.lha=:\
*.lz4=:\
*.lzh=:\
*.lzma=:\
*.tlz=:\
*.txz=:\
*.tzo=:\
*.t7z=:\
*.zip=:\
*.z=:\
*.dz=:\
*.gz=:\
*.lrz=:\
*.lz=:\
*.lzo=:\
*.xz=:\
*.zst=:\
*.tzst=:\
*.bz2=:\
*.bz=:\
*.tbz=:\
*.tbz2=:\
*.tz=:\
*.deb=:\
*.rpm=:\
*.jar=:\
*.war=:\
*.ear=:\
*.sar=:\
*.rar=:\
*.alz=:\
*.ace=:\
*.zoo=:\
*.cpio=:\
*.7z=:\
*.rz=:\
*.cab=:\
*.wim=:\
*.swm=:\
*.dwm=:\
*.esd=:\
*.jpg=:\
*.jpeg=:\
*.mjpg=:\
*.mjpeg=:\
*.gif=:\
*.bmp=:\
*.pbm=:\
*.pgm=:\
*.ppm=:\
*.tga=:\
*.xbm=:\
*.xpm=:\
*.tif=:\
*.tiff=:\
*.png=:\
*.svg=:\
*.svgz=:\
*.mng=:\
*.pcx=:\
*.mov=:\
*.mpg=:\
*.mpeg=:\
*.m2v=:\
*.mkv=:\
*.webm=:\
*.ogm=:\
*.mp4=:\
*.m4v=:\
*.mp4v=:\
*.vob=:\
*.qt=:\
*.nuv=:\
*.wmv=:\
*.asf=:\
*.rm=:\
*.rmvb=:\
*.flc=:\
*.avi=:\
*.fli=:\
*.flv=:\
*.gl=:\
*.dl=:\
*.xcf=:\
*.xwd=:\
*.yuv=:\
*.cgm=:\
*.emf=:\
*.ogv=:\
*.ogx=:\
*.aac=:\
*.au=:\
*.flac=:\
*.m4a=:\
*.mid=:\
*.midi=:\
*.mka=:\
*.mp3=:\
*.mpc=:\
*.ogg=:\
*.ra=:\
*.wav=:\
*.oga=:\
*.opus=:\
*.spx=:\
*.xspf=:\
*.pdf=:\
*.nix=:\
"
#+end_src

** Load Shortcuts
#+begin_src sh
[ ! -f ${XDG_CONFIG_HOME:-$HOME/.config}/shortcutrc ] && shortcuts >/dev/null 2>&1 &
#+end_src
** tty1

Start graphical server on tty1 if not already running.

#+begin_src sh
[ "$(tty)" = "/dev/tty1" ] && ! ps -e | grep -qw Xorg && exec startx
#+end_src

* Git
** ~/.gitconfig
#+BEGIN_SRC conf :tangle ~/.gitconfig
[user]
	email = anton.hakansson98@gmail.com
	name = AntonHakansson
#+END_SRC

* Terminals
** Alacritty
#+begin_src yaml :tangle ~/.config/alacritty/alacritty.yml :noweb yes
colors:
  primary:
    background: '<<color(c="bg")>>'
    foreground: '<<color(c="fg"")>>'
    dim_foreground: '#a5abb6'
  cursor:
    text: '<<color(c="fg")>>'
    cursor: '<<color(c="blue")>>'
  vi_mode_cursor:
    text: '<<color(c="fg")>>'
    cursor: '<<color(c="blue")>>'
  selection:
    text: CellForeground
    background: '<<color(c="region")>>'
  search:
    matches:
      foreground: CellBackground
      background: '#88c0d0'
    bar:
      background: '#434c5e'
      foreground: '#d8dee9'
  normal:
    black: '<<color(c="black")>>'
    red: '<<color(c="red")>>'
    green: '<<color(c="green")>>'
    yellow: '<<color(c="yellow")>>'
    blue: '<<color(c="blue")>>'
    magenta: '<<color(c="magenta")>>'
    cyan: '<<color(c="cyan")>>'
    white: '<<color(c="white")>>'
  bright:
    black: '<<color(c="base3")>>'
    red: '<<lighten(c="red")>>'
    green: '<<lighten(c="green")>>'
    yellow: '<<lighten(c="yellow")>>'
    blue: '<<lighten(c="blue")>>'
    magenta: '<<lighten(c="magenta")>>'
    cyan: '<<lighten(c="cyan")>>'
    white: '<<lighten(c="white")>>'
  dim:
    black: '<<darken(c="black")>>'
    red: '<<darken(c="red")>>'
    green: '<<darken(c="green")>>'
    yellow: '<<darken(c="yellow")>>'
    blue: '<<darken(c="blue")>>'
    magenta: '<<darken(c="magenta")>>'
    cyan: '<<darken(c="cyan")>>'
    white: '<<darken(c="white")>>'
#+end_src

* BSPWM
#+NAME: bar-height
#+begin_src elisp
18
#+end_src

#+NAME: window-gap
#+begin_src elisp
10
#+end_src

#+begin_src sh :tangle ~/.config/bspwm/bspwmrc :tangle-mode (identity #o755) :noweb yes
#!/bin/sh

pgrep -x sxhkd > /dev/null || sxhkd &

# If refreshing bspwm, remove all previous rules to prevent doubling up.
bspc rule -r "*"

# Start workspaces on the main monitor.
if xrandr --listactivemonitors | grep HDMI-0 >/dev/null; then
	bspc monitor DVI-I-1 -d 1 2 3 4 5 6 7 8
	bspc monitor HDMI-0 -d 9 10
	bspc desktop -f 1
else
	bspc monitor -d 1 2 3 4 5 6 7 8 9 10
	bspc desktop -f 1
fi

bspc config border_width 2
bspc config focused_border_color "<<color(c="blue")>>"
bspc config window_gap 10
bspc config top_padding <<bar-height()>>
bspc config focus_follows_pointer true

bspc rule -a Emacs state=tiled
bspc rule -a Thunar state=floating
#+end_src

* Keybindings
:PROPERTIES:
:header-args: :tangle ~/.config/sxhkd/sxhkdrc :noweb yes
:END:

** Reload Keybinding
#+begin_src conf
# Reloads sxhkd config
super + shift + r
    pkill -USR1 -x sxhkd; \
    notify-send "reloaded sxhkd"

# Brings up keybinding helper
super + slash
    sxhkd-help
#+end_src
** Run programs
#+begin_src conf
# Open a terminal
super + Return
    $TERMINAL
# Run dmenu
super + d
    dmenu_run
# Open emacs
super + e
    emacs
# Open emacs anywhere (broken)
super + shift + e
    bspwmfloat emacs_anywhere

# Open up default browser
super + w
    $BROWSER
# Open up graphical file browser
super + s
    thunar
# Toggle polybar
super + b
    toggle_polybar &
#+end_src
** Power tools
#+begin_src conf
# Shutdown computer prompt
super + shift + x
    prompt "Shutdown computer?" "sudo -A shutdown -h now"
# Reboot computer prompt
super + shift + BackSpace
    prompt "Reboot computer?" "sudo -A reboot"
# Leave Xorg prompt
super + shift + Escape
    prompt 'Leave Xorg?' 'killall Xorg'
# Lock computer
super + x
    ifinstalled slock && ( slock & xset dpms force off ; mpc pause ; pauseallmpv )
#+end_src
** Utility (Screenshot, unicode selector etc.)
#+begin_src conf
# Screenshot
super + p
    maimpick

# Copy Unicode character
super + grave
    dmenuunicode
#+end_src
** Window Manager (BSPWM)
#+begin_src conf
# focus the window in the given direction
super + {_,shift + }{h,j,k,l}
    bspc node -{f,s} {west,south,north,east}

# focus workspace or send window to the given desktop
super + {_,shift + }{1-9,0}
    bspc {desktop -f,node -d} ^{1-9,10}

# focus previous workspace
super + {Tab,backslash}
    bspc desktop last --focus

# expand a window by moving one of its side outward
super + alt + {h,j,k,l}
    bspc node -z {left -40 0,bottom 0 40,top 0 -40,right 20 0}

# contract a window by moving one of its side inward
super + alt + ctrl + {h,j,k,l}
    bspc node -z {right -40 0,top 0 40,bottom 0 -40,left 40 0}

# focus or swap the next window
super + {_,shift + }c
    bspc node -{f,s} next.local

# toggle floating mode on focused window
super + shift + space
    bspc node focused -t \~floating

# close and kill
super + {_,shift + }q
    bspc node -{c,k}

# alternate between the tiled and monocle layout
super + {_,shift + }f
    bspc {desktop -l next,node -t ~fullscreen}

# swap the current node and the biggest local node
super + space
    bspc node -s biggest.local || bspc node -s next.local

# rotate current node 90 degrees
super + y
    bspc node @focused:/ -R 90

# tabbing functionality
super + t ; {h,j,k,l,d}
    sxhkd-tabbed {west, south, north, east, detach}
#+end_src
*** Gaps
#+begin_src conf
# Toggle gaps
super + shift + d
    bspc config window_gap {0,<<window-gap()>>} ; \
    bspc config top_padding <<bar-height()>>

# Increase/descrease gap size
super { ,+ shift } + z
    bspc config window_gap $(($(bspc config window_gap) {+,-} 15)) ;\
    bspc config top_padding <<bar-height()>>

#+end_src
*** Monitor
#+begin_src conf
super + o
    prompt "Toggle monitors?" && toggle_secondary_monitor
#+end_src
** Special Key Events
#+begin_src conf
# Audiokeys
XF86AudioMute
    pactl set-sink-mute @DEFAULT_SINK@ toggle
XF86Audio{Raise,Lower}Volume
    pactl set-sink-volume @DEFAULT_SINK@ {+,-}5%
XF86Audio{Next,Prev}
    notify-send "XF86Audio[Next, Prev] event not handled"
XF86Audio{Pause,Play,Stop}
    notify-send "XF86Audio[Pause, Play, Stop] event not handled"
XF86Audio{Rewind,Forward}
    notify-send "XF86Audio[Rewind, Forward] event not handled"

XF86PowerOff
    prompt "Shutdown computer?" "sudo -A shutdown -h now"
XF86Calculator
    $TERMINAL -e bc
XF86Sleep
    prompt 'Hibernate computer?' 'sudo -A zzz'
XF86WWW
    $BROWSER
XF86DOS
    $TERMINAL
XF86TaskPane
    $TERMINAL -e htop
XF86Mail
    $TERMINAL -e neomutt
XF86MyComputer
    $TERMINAL -e $FILE
#+end_src
** Mouse Control
#+name: mouse-speed
#+begin_src elisp :tangle nil
40
#+end_src

#+begin_src conf
# Move mouse
super + {Left, Down, Up, Right}
    xdotool mousemove_relative -- { -<<mouse-speed()>> 0, 0 <<mouse-speed()>>, 0 -<<mouse-speed()>>, <<mouse-speed()>> 0 }

# Press mouse
super + {_, shift} + m
    xdotool mousedown --clearmodifiers {1, 3}
@super+ {_, shift} + m
    xdotool mouseup --clearmodifiers {1, 3}
#+end_src

* Polybar
:PROPERTIES:
:header-args: :tangle ~/.config/polybar/config :noweb yes
:END:

To learn more about how to configure Polybar
go to https://github.com/jaagr/polybar

The README contains alot of information
Themes : https://github.com/jaagr/dots/tree/master/.local/etc/themer/themes
https://github.com/jaagr/polybar/wiki/
https://github.com/jaagr/polybar/wiki/Configuration
https://github.com/jaagr/polybar/wiki/Formatting

** Base Settings
#+begin_src conf
[global/wm]
;https://github.com/jaagr/polybar/wiki/Configuration#global-wm-settings
margin-top = 0
margin-bottom = 0

[settings]
;https://github.com/jaagr/polybar/wiki/Configuration#application-settings
throttle-output = 5
throttle-output-for = 10
throttle-input-for = 30
screenchange-reload = true
compositing-background = over
compositing-foreground = over
compositing-overline = over
compositing-underline = over
compositing-border = over

; Define fallback values used by all module formats
format-foreground = #FF0000
format-background = #00FF00
format-underline =
format-overline =
format-spacing =
format-padding =
format-margin =
format-offset =
#+end_src

** Colors
#+begin_src conf
[colors]
background = <<color(c="bg")>>
foreground = <<color(c="fg")>>
alert = <<color(c="error")>>
magenta = <<color(c="magenta")>>
blue = <<color(c="blue")>>

alternate1 = <<color(c="base0")>>
alternate2 = <<color(c="base4")>>
#+end_src
** Bars
*** BSPWM
#+begin_src conf
[bar/mainbar-bspwm]
monitor = ${env:MONITOR}
;monitor-fallback = HDMI1
width = 100%
height = <<bar-height()>>
;offset-x = 1%
;offset-y = 1%
radius = 0.0
fixed-center = true
bottom = false
separator =

background = ${colors.background}
foreground = ${colors.foreground}

line-size = 2
line-color = #f00

wm-restack = bspwm
override-redirect = true

; Enable support for inter-process messaging
; See the Messaging wiki page for more details.
enable-ipc = true

border-size = 0
;border-left-size = 0
;border-right-size = 25
;border-top-size = 0
;border-bottom-size = 25
border-color = #00000000

padding-left = 1
padding-right = 1

module-margin-left = 0
module-margin-right = 0

;https://github.com/jaagr/polybar/wiki/Fonts
font-0 = "UbuntuMono Nerd Font:size=10;2"
font-1 = "UbuntuMono Nerd Font:size=16;3"
font-2 = "Font Awesome 5 Free:style=Regular:pixelsize=8;1"
font-3 = "Font Awesome 5 Free:style=Solid:pixelsize=8;1"
font-4 = "Font Awesome 5 Brands:pixelsize=8;1"

modules-left = bspwm xwindow
modules-center =
modules-right = arrow1 networkspeedup networkspeeddown arrow2 memory2 arrow3 cpu2 arrow2 pavolume arrow3 arch-aur-updates arrow2 date

tray-detached = false
tray-offset-x = 0
tray-offset-y = 0
tray-position = right
tray-padding = 2
tray-maxsize = 20
tray-scale = 1.0
tray-background = ${colors.background}

scroll-up = bspwm-desknext
scroll-down = bspwm-deskprev
#+end_src
*** I3
#+begin_src conf
[bar/mainbar-i3]
;https://github.com/jaagr/polybar/wiki/Configuration

monitor = ${env:MONITOR}
;monitor-fallback = HDMI1
monitor-strict = false
override-redirect = false
bottom = false
fixed-center = true
width = 100%
height = 18
;offset-x = 1%
;offset-y = 1%

background = ${colors.background}
foreground = ${colors.foreground}

; Background gradient (vertical steps)
;   background-[0-9]+ = #aarrggbb
;background-0 =

radius = 0.0
line-size = 2
line-color = #000000

border-size = 0
;border-left-size = 25
;border-right-size = 25
;border-top-size = 0
;border-bottom-size = 25
border-color = #000000

padding-left = 1
padding-right = 1

module-margin-left = 0
module-margin-right = 0

;https://github.com/jaagr/polybar/wiki/Fonts
font-0 = "UbuntuMono Nerd Font:size=10;2"
font-1 = "UbuntuMono Nerd Font:size=16;3"
font-2 = "Font Awesome 5 Free:style=Regular:pixelsize=8;1"
font-3 = "Font Awesome 5 Free:style=Solid:pixelsize=8;1"
font-4 = "Font Awesome 5 Brands:pixelsize=8;1"

modules-left = i3 xwindow
modules-center =
modules-right = arrow1 networkspeedup networkspeeddown arrow2 memory2 arrow3 cpu2 arrow2 pavolume arrow3 arch-aur-updates arrow2 date

separator =

;dim-value = 1.0

tray-position = right
tray-detached = false
tray-maxsize = 20
tray-background = ${colors.background}
tray-offset-x = 0
tray-offset-y = 0
tray-padding = 4
tray-scale = 1.0

#i3: Make the bar appear below windows
;wm-restack = i3
;override-redirect = true

; Enable support for inter-process messaging
; See the Messaging wiki page for more details.
enable-ipc = true

; Fallback click handlers that will be called if
; there's no matching module handler found.
click-left =
click-middle =
click-right =
scroll-up = i3wm-wsnext
scroll-down = i3wm-wsprev
double-click-left =
double-click-middle =
double-click-right =

; Requires polybar to be built with xcursor support (xcb-util-cursor)
; Possible values are:
; - default   : The default pointer as before, can also be an empty string (default)
; - pointer   : Typically in the form of a hand
; - ns-resize : Up and down arrows, can be used to indicate scrolling
cursor-click =
cursor-scroll =
#+end_src

** Modules
*** I3
#+begin_src conf
[module/i3]
;https://github.com/jaagr/polybar/wiki/Module:-i3
type = internal/i3

; Only show workspaces defined on the same output as the bar
;
; Useful if you want to show monitor specific workspaces
; on different bars
;
; Default: false
pin-workspaces = true

; This will split the workspace name on ':'
; Default: false
strip-wsnumbers = false

; Sort the workspaces by index instead of the default
; sorting that groups the workspaces by output
; Default: false
index-sort = false

; Create click handler used to focus workspace
; Default: true
enable-click = true

; Create scroll handlers used to cycle workspaces
; Default: true
enable-scroll = true

; Wrap around when reaching the first/last workspace
; Default: true
wrapping-scroll = false

; Set the scroll cycle direction
; Default: true
reverse-scroll = false

; Use fuzzy (partial) matching on labels when assigning
; icons to workspaces
; Example: code;♚ will apply the icon to all workspaces
; containing 'code' in the label
; Default: false
fuzzy-match = false

;extra icons to choose from
;http://fontawesome.io/cheatsheet/
;       v     

ws-icon-0 = 1;
ws-icon-1 = 2;
ws-icon-2 = 3;
ws-icon-3 = 4;
ws-icon-4 = 5;
ws-icon-5 = 6;
ws-icon-6 = 7;
ws-icon-7 = 8;
ws-icon-8 = 9;
ws-icon-9 = 10;
ws-icon-default = " "

; Available tags:
;   <label-state> (default) - gets replaced with <label-(focused|unfocused|visible|urgent)>
;   <label-mode> (default)
format = <label-state> <label-mode>

label-mode = %mode%
label-mode-padding = 2
label-mode-foreground = #000000
label-mode-background = #FFBB00

; Available tokens:
;   %name%
;   %icon%
;   %index%
;   %output%
; Default: %icon%  %name%
; focused = Active workspace on focused monitor
label-focused = %icon% %name%
label-focused-background = ${colors.background}
label-focused-foreground = ${colors.foreground}
label-focused-underline = #AD69AF
label-focused-padding = 2

; Available tokens:
;   %name%
;   %icon%
;   %index%
; Default: %icon%  %name%
; unfocused = Inactive workspace on any monitor
label-unfocused = %icon% %name%
label-unfocused-padding = 2
label-unfocused-background = ${colors.background}
label-unfocused-foreground = ${colors.foreground}
label-unfocused-underline =

; visible = Active workspace on unfocused monitor
label-visible = %icon% %name%
label-visible-background = ${self.label-focused-background}
label-visible-underline = ${self.label-focused-underline}
label-visible-padding = 2

; Available tokens:
;   %name%
;   %icon%
;   %index%
; Default: %icon%  %name%
; urgent = Workspace with urgency hint set
label-urgent = %icon% %name%
label-urgent-background = ${self.label-focused-background}
label-urgent-foreground = #db104e
label-urgent-padding = 2

format-foreground = ${colors.foreground}
format-background = ${colors.background}
#+end_src

*** BSPWM
#+begin_src conf
[module/bspwm]
type = internal/bspwm

enable-click = true
enable-scroll = true
reverse-scroll = true
pin-workspaces = true

ws-icon-0 = 1;
ws-icon-1 = 2;
ws-icon-2 = 3;
ws-icon-3 = 4;
ws-icon-4 = 5;
ws-icon-5 = 6;
ws-icon-6 = 7;
ws-icon-7 = 8;
ws-icon-8 = 9;
ws-icon-9 = 10;
ws-icon-default = " "


format = <label-state>   <label-mode>

label-focused = %icon%
label-focused-background = ${colors.background}
label-focused-underline = ${colors.blue}
label-focused-padding = 2
label-focused-foreground = ${colors.foreground}

label-occupied = %icon%
label-occupied-padding = 2
label-occupied-background = ${colors.background}

label-urgent = %icon%
label-urgent-padding = 2

label-empty = %icon%
label-empty-foreground = ${colors.foreground}
label-empty-padding = 2
label-empty-background = ${colors.background}
label-monocle = "  "
label-monocle-foreground = ${colors.magenta}
label-tiled = "  "
label-tiled-foreground = ${colors.foreground}
label-fullscreen = "  "
label-fullscreen-foreground = ${colors.magenta}
label-floating = "  "
label-floating-foreground = ${colors.foreground}
label-pseudotiled = "  "
label-pseudotiled-foreground = ${colors.foreground}
label-locked = "  "
label-locked-foreground = ${colors.foreground}
label-sticky = "  "
label-sticky-foreground = ${colors.foreground}
label-private =  "     "
label-private-foreground = ${colors.foreground}

; Separator in between workspaces
;label-separator = |
;label-separator-padding = 10
;label-separator-foreground = #ffb52a

format-foreground = ${colors.foreground}
format-background = ${colors.background}
#+end_src
*** Arrows
#+begin_src conf
[module/arrow1]
; grey to Blue
type = custom/text
content = "%{T2} %{T-}"
content-font = 2
content-foreground = ${colors.alternate1}
content-background = ${colors.background

[module/arrow2]
; grey to Blue
type = custom/text
content = "%{T2} %{T-}"
content-font = 2
content-foreground = ${colors.alternate2}
content-background = ${colors.alternate1}

[module/arrow3]
; grey to Blue
type = custom/text
content = "%{T2} %{T-}"
content-font = 2
content-foreground = ${colors.alternate1}
content-background = ${colors.alternate2}
#+end_src
*** a-z
#+begin_src conf
################################################################################
###############################################################################
############                       MODULES A-Z                      ############
################################################################################
################################################################################

[module/arch-aur-updates]
type = custom/script
exec = ~/.config/polybar/scripts/check-all-updates.sh
interval = 1000
label = Updates:%output%
format-foreground = #fefefe
format-background = ${colors.alternate1}
format-prefix = "  "
format-prefix-foreground = #fefefe


[module/aur-updates]
type = custom/script
exec = cower -u | wc -l
interval = 1000
label = Aur: %output%
format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-prefix = "  "
format-prefix-foreground = #FFBB00
format-underline = #FFBB00

################################################################################

[module/backlight-acpi]
inherit = module/xbacklight
type = internal/backlight
card = intel_backlight
format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-prefix-foreground = #7D49B6
format-prefix-underline = #7D49B6
format-underline = #7D49B6
################################################################################

[module/backlight]
;https://github.com/jaagr/polybar/wiki/Module:-backlight

type = internal/backlight

; Use the following command to list available cards:
; $ ls -1 /sys/class/backlight/
card = intel_backlight

; Available tags:
;   <label> (default)
;   <ramp>
;   <bar>
format = <label>
format-foreground = ${colors.foreground}
format-background = ${colors.background}

; Available tokens:
;   %percentage% (default)
label = %percentage%%

; Only applies if <ramp> is used
ramp-0 = 🌕
ramp-1 = 🌔
ramp-2 = 🌓
ramp-3 = 🌒
ramp-4 = 🌑

; Only applies if <bar> is used
bar-width = 10
bar-indicator = |
bar-fill = ─
bar-empty = ─

################################################################################

[module/battery]
;https://github.com/jaagr/polybar/wiki/Module:-battery
type = internal/battery
battery = BAT0
adapter = AC0
full-at = 100

format-charging = <animation-charging> <label-charging>
label-charging =  %percentage%%
format-charging-foreground = ${colors.foreground}
format-charging-background = ${colors.background}
format-charging-underline = #a3c725

format-discharging = <ramp-capacity> <label-discharging>
label-discharging =  %percentage%%
format-discharging-underline = #c7ae25
format-discharging-foreground = ${colors.foreground}
format-discharging-background = ${colors.background}

format-full-prefix = " "
format-full-prefix-foreground = #a3c725
format-full-underline = #a3c725
format-full-foreground = ${colors.foreground}
format-full-background = ${colors.background}

ramp-capacity-0 = 
ramp-capacity-1 = 
ramp-capacity-2 = 
ramp-capacity-3 = 
ramp-capacity-4 = 
ramp-capacity-foreground = #c7ae25

animation-charging-0 = 
animation-charging-1 = 
animation-charging-2 = 
animation-charging-3 = 
animation-charging-4 = 
animation-charging-foreground = #a3c725
animation-charging-framerate = 750

################################################################################

[module/compton]
;https://github.com/jaagr/polybar/wiki/User-contributed-modules#compton
type = custom/script
exec = ~/.config/polybar/scripts/compton.sh
click-left = ~/.config/polybar/scripts/compton-toggle.sh
interval = 5
format-foreground = ${colors.foreground}
format-background = ${colors.background}
;format-underline = #00AF02

################################################################################

[module/cpu1]
;https://github.com/jaagr/polybar/wiki/Module:-cpu
type = internal/cpu
; Seconds to sleep between updates
; Default: 1
interval = 1
format-foreground = ${colors.foreground}
format-background = ${colors.background}
;   
format-prefix = " "
format-prefix-foreground = #cd1f3f
format-underline = #645377

; Available tags:
;   <label> (default)
;   <bar-load>
;   <ramp-load>
;   <ramp-coreload>
format = <label> <ramp-coreload>

format-padding = 2

; Available tokens:
;   %percentage% (default) - total cpu load
;   %percentage-cores% - load percentage for each core
;   %percentage-core[1-9]% - load percentage for specific core
label-font = 3
label = CPU: %percentage%%
ramp-coreload-0 = ▁
ramp-coreload-0-font = 3
ramp-coreload-0-foreground = #aaff77
ramp-coreload-1 = ▂
ramp-coreload-1-font = 3
ramp-coreload-1-foreground = #aaff77
ramp-coreload-2 = ▃
ramp-coreload-2-font = 3
ramp-coreload-2-foreground = #aaff77
ramp-coreload-3 = ▄
ramp-coreload-3-font = 3
ramp-coreload-3-foreground = #aaff77
ramp-coreload-4 = ▅
ramp-coreload-4-font = 3
ramp-coreload-4-foreground = #fba922
ramp-coreload-5 = ▆
ramp-coreload-5-font = 3
ramp-coreload-5-foreground = #fba922
ramp-coreload-6 = ▇
ramp-coreload-6-font = 3
ramp-coreload-6-foreground = #ff5555
ramp-coreload-7 = █
ramp-coreload-7-font = 3
ramp-coreload-7-foreground = #ff5555

################################################################################

[module/cpu2]
;https://github.com/jaagr/polybar/wiki/Module:-cpu
type = internal/cpu
; Seconds to sleep between updates
; Default: 1
interval = 1
format-foreground = #fefefe
format-background = ${colors.alternate1}
format-prefix = " "
format-prefix-foreground = #fefefe

label-font = 1

; Available tags:
;   <label> (default)
;   <bar-load>
;   <ramp-load>
;   <ramp-coreload>
format = <label>


; Available tokens:
;   %percentage% (default) - total cpu load
;   %percentage-cores% - load percentage for each core
;   %percentage-core[1-9]% - load percentage for specific core
label = CPU %percentage%%

################################################################################

[module/date]
;https://github.com/jaagr/polybar/wiki/Module:-date
type = internal/date
; Seconds to sleep between updates
interval = 5
; See "http://en.cppreference.com/w/cpp/io/manip/put_time" for details on how to format the date string
; NOTE: if you want to use syntax tags here you need to use %%{...}
date = " %a %b %d, %Y"
date-alt = " %a %b %d, %Y"
time = %H:%M%
time-alt = %H:%M%
format-prefix = "  "
format-prefix-foreground = #fefefe
format-foreground = #fefefe
format-background = ${colors.alternate2}
label = "%date% %time% "

#################################################################

[module/ewmh]
type = internal/xworkspaces

pin-workspaces = false
enable-click = true
enable-scroll = true
reverse-scroll = true

;extra icons to choose from
;http://fontawesome.io/cheatsheet/
;       v     

icon-0 = 1;
icon-1 = 2;
icon-2 = 3;
icon-3 = 4;
icon-4 = 5;
icon-5 = 6;
icon-6 = 7;
icon-7 = 8;
#icon-8 = 9;
#icon-9 = 10;
#icon-default = " "
format = <label-state>
label-monitor = %name%

label-active = %name%
label-active-foreground = ${colors.foreground}
label-active-background = ${colors.background}
label-active-underline= #6790eb
label-active-padding = 1

label-occupied = %name%
label-occupied-background = ${colors.background}
label-occupied-padding = 1

label-urgent = %name%
label-urgent-foreground = ${colors.foreground}
label-urgent-background = ${colors.alert}
label-urgent-underline = ${colors.alert}
label-urgent-padding = 1

label-empty = %name%
label-empty-foreground = ${colors.foreground}
label-empty-padding = 1
format-foreground = ${colors.foreground}
format-background = ${colors.background}


################################################################################

[module/filesystem]
;https://github.com/jaagr/polybar/wiki/Module:-filesystem
type = internal/fs

; Mountpoints to display
mount-0 = /
;mount-1 = /home
;mount-2 = /var

; Seconds to sleep between updates
; Default: 30
interval = 30

; Display fixed precision values
; Default: false
fixed-values = false

; Spacing between entries
; Default: 2
spacing = 4

; Available tags:
;   <label-mounted> (default)
;   <bar-free>
;   <bar-used>
;   <ramp-capacity>
format-mounted = <label-mounted>
format-mounted-foreground = ${colors.foreground}
format-mounted-background = ${colors.background}
format-mounted-underline = #fe0000


; Available tokens:
;   %mountpoint%
;   %type%
;   %fsname%
;   %percentage_free%
;   %percentage_used%
;   %total%
;   %free%
;   %used%
; Default: %mountpoint% %percentage_free%%
label-mounted = %mountpoint% : %used% used of %total%

; Available tokens:
;   %mountpoint%
; Default: %mountpoint% is not mounted
label-unmounted = %mountpoint% not mounted
format-unmounted-foreground = ${colors.foreground}
format-unmounted-background = ${colors.background}
;format-unmounted-underline = ${colors.alert}

################################################################################

[module/kernel]
type = custom/script
exec = uname -r
tail = false
interval = 1024

format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-prefix = "  "
format-prefix-foreground = #0084FF
format-underline = #4B5665

################################################################################

[module/jgmenu]
type = custom/script
interval = 120
exec = echo "ArcoLinux"
click-left = "jgmenu_run >/dev/null 2>&1 &"
format-foreground = ${colors.foreground}
format-background = ${colors.background}

################################################################################

[module/load-average]
type = custom/script
exec = uptime | grep -ohe 'load average[s:][: ].*' | awk '{ print $3" "$4" "$5"," }' | sed 's/,//g'
interval = 100

;HOW TO SET IT MINIMAL 10 CHARACTERS - HIDDEN BEHIND SYSTEM ICONS
;label = %output%
label = %output:10%

format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-prefix = "  "
format-prefix-foreground = #62FF00
format-underline = #62FF00

################################################################################

[module/memory1]
;https://github.com/jaagr/polybar/wiki/Module:-memory
type = internal/memory
interval = 1
; Available tokens:
;   %percentage_used% (default)
;   %percentage_free%
;   %gb_used%
;   %gb_free%
;   %gb_total%
;   %mb_used%
;   %mb_free%
;   %mb_total%
label = %percentage_used%%
bar-used-indicator =
bar-used-width = 10
bar-used-foreground-0 = #3384d0
bar-used-fill = 
bar-used-empty = 
bar-used-empty-foreground = #ffffff

format = <label> <bar-used>
format-prefix = "  "
format-prefix-foreground = #3384d0
format-underline = #4B5665
format-foreground = ${colors.foreground}
format-background = ${colors.background}

################################################################################

[module/memory2]
;https://github.com/jaagr/polybar/wiki/Module:-memory
type = internal/memory
interval = 1
; Available tokens:
;   %percentage_used% (default)
;   %percentage_free%
;   %gb_used%
;   %gb_free%
;   %gb_total%
;   %mb_used%
;   %mb_free%
;   %mb_total%
label = %percentage_used%%

format = Mem <label>
format-prefix = " "
format-prefix-foreground = #fefefe
format-foreground = #fefefe
format-background = ${colors.alternate2}

################################################################################

[module/memory3]
;https://github.com/jaagr/polybar/wiki/Module:-memory
type = internal/memory
interval = 1
; Available tokens:
;   %percentage_used% (default)
;   %percentage_free%
;   %gb_used%
;   %gb_free%
;   %gb_total%
;   %mb_used%
;   %mb_free%
;   %mb_total%
label = %gb_used%/%gb_free%

format = Mem <label>
format-prefix = "  "
format-prefix-foreground = #3384d0
format-underline = #3384d0
format-foreground = ${colors.foreground}
format-background = ${colors.background}


################################################################################

[module/mpd]
;https://github.com/jaagr/polybar/wiki/Module:-mpd
type = internal/mpd
;format-online =  "<label-song>   <icon-prev>  <icon-stop>  <toggle>  <icon-next>"
format-online =  "<label-song>  <bar-progress>"
;format-online =  "<label-song>  <bar-progress> <icon-prev>  <icon-stop>  <toggle>  <icon-next>"
icon-prev = 
icon-stop = 
icon-play = 
icon-pause = 
icon-next = 
label-song-maxlen = 40
label-song-ellipsis = true
bar-progress-width = 10
bar-progress-indicator = 
bar-progress-fill = 
bar-progress-empty = 
bar-progress-fill-foreground = #ff0
bar-progress-fill-background = ${colors.background}
bar-progress-indicator-foreground = ${colors.foreground}
format-online-foreground = ${colors.foreground}
format-online-background = ${colors.background}
################################################################################

[module/networkspeedup]
;https://github.com/jaagr/polybar/wiki/Module:-network
type = internal/network
interface = wlp3s0
;interface = enp14s0
;interface = enp0s31f6
;interface = enp3s0
label-connected = "%upspeed:7%"
format-connected = <label-connected>
format-connected-prefix = " "
format-connected-prefix-foreground = #fefefe
format-connected-foreground = #fefefe
format-connected-background = ${colors.alternate1}

################################################################################

[module/networkspeeddown]
;https://github.com/jaagr/polybar/wiki/Module:-network
type = internal/network
interface = wlp3s0
;interface = enp14s0
;interface = enp0s31f6
;interface = enp3s0
label-connected = "%downspeed:7%"
format-connected = <label-connected>
format-connected-prefix = "  "
format-connected-prefix-foreground = #fefefe
format-connected-foreground = #fefefe
format-connected-background = ${colors.alternate1}

################################################################################

[module/pacman-updates]
type = custom/script
;exec = pacman -Qu | wc -l
exec = checkupdates | wc -l
interval = 1000
label = Repo: %output%
format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-prefix = "  "
format-prefix-foreground = #FFBB00
format-underline = #FFBB00

################################################################################

[module/pavolume]
type = custom/script
tail = true
label = %output%
exec = ~/.config/polybar/scripts/pavolume.sh --listen
click-right = exec pavucontrol
click-left = ~/.config/polybar/scripts/pavolume.sh --togmute
scroll-up = ~/.config/polybar/scripts/pavolume.sh --up
scroll-down = ~/.config/polybar/scripts/pavolume.sh --down
format-foreground = #fefefe
format-background = ${colors.alternate2}



################################################################################

[module/pub-ip]
;https://linuxconfig.org/polybar-a-better-wm-panel-for-your-linux-system
type = custom/script
exec = ~/.config/polybar/scripts/pub-ip.sh
interval = 100
format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-underline = #FFBB00
label = %output%
format-prefix = "  "
format-prefix-foreground = #FFBB00

################################################################################

[module/release]
type = custom/script
exec = (lsb_release -d | awk {'print $2'} ;echo " "; lsb_release -r | awk {'print $2'}) | tr -d '\n'
interval = 6000

format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-prefix = "  "
format-prefix-foreground = #62FF00
format-underline = #62FF00

################################################################################

[module/sep]
; alternative separator
type = custom/text
content = 
content-foreground = ${colors.foreground}
content-background =  ${colors.background}
format-foreground = ${colors.foreground}
format-background = ${colors.background}

################################################################################

[module/spotify1]
;https://github.com/NicholasFeldman/dotfiles/blob/master/polybar/.config/polybar/spotify.sh
type = custom/script
exec = ~/.config/polybar/scripts/spotify1.sh
interval = 1

;format = <label>
format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-padding = 2
format-underline = #0f0
format-prefix = "  "
format-prefix-foreground = #0f0
label = %output:0:150%

################################################################################

[module/temperature1]
;https://github.com/jaagr/polybar/wiki/Module:-temperature
type = internal/temperature
; Thermal zone to use
; To list all the zone types, run
; $ for i in /sys/class/thermal/thermal_zone*; do echo "$i: $(<$i/type)"; done
; Default: 0
thermal-zone = 0

; Full path of temperature sysfs path
; Use `sensors` to find preferred temperature source, then run
; $ for i in /sys/class/hwmon/hwmon*/temp*_input; do echo "$(<$(dirname $i)/name): $(cat ${i%_*}_label 2>/dev/null || echo $(basename ${i%_*})) $(readlink -f $i)"; done
; to find path to desired file
; Default reverts to thermal zone setting
hwmon-path = /sys/devices/platform/coretemp.0/hwmon/hwmon1/temp1_input

warn-temperature = 70
format = <ramp> <label>
format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-underline = #c72581
format-warn = <ramp> <label-warn>
format-warn-underline = #c7254f
label = %temperature%
label-warn =  %temperature%
label-warn-foreground = #c7254f

ramp-0 = 
ramp-1 = 
ramp-2 = 
ramp-3 = 
ramp-4 = 
ramp-foreground =${colors.foreground}

################################################################################

[module/temperature2]
type = custom/script
exec = ~/.config/polybar/scripts/tempcores.sh
interval = 2
format-padding = 1
format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-underline = #C1B93E
format-prefix-foreground = #C1B93E
label =  %output:0:150:%

################################################################################

[module/xmonad]
type = custom/script
exec = xmonad-log
tail = true
format-background = ${colors.background}
format-foreground = ${colors.foreground}

################################################################################

[module/uptime]
;https://github.com/jaagr/polybar/wiki/User-contributed-modules#uptime
type = custom/script
exec = uptime | awk -F, '{sub(".*up ",x,$1);print $1}'
interval = 100
label = Uptime : %output%

format-foreground = ${colors.foreground}
format-background = ${colors.background}
format-prefix = " "
format-prefix-foreground = #C15D3E
format-underline = #C15D3E

################################################################################

[module/volume]
;https://github.com/jaagr/polybar/wiki/Module:-volume
type = internal/volume
format-volume = "<label-volume>  <bar-volume>"

label-volume = " "
label-volume-foreground = #40ad4b
label-muted = muted

bar-volume-width = 10
bar-volume-foreground-0 = #40ad4b
bar-volume-foreground-1 = #40ad4b
bar-volume-foreground-2 = #40ad4b
bar-volume-foreground-3 = #40ad4b
bar-volume-foreground-4 = #40ad4b
bar-volume-foreground-5 = #40ad4b
bar-volume-foreground-6 = #40ad4b
bar-volume-gradient = false
bar-volume-indicator = 
bar-volume-indicator-font = 2
bar-volume-fill = 
bar-volume-fill-font = 2
bar-volume-empty = 
bar-volume-empty-font = 2
bar-volume-empty-foreground = ${colors.foreground}
format-volume-foreground = ${colors.foreground}
format-volume-background = ${colors.background}
format-muted-prefix = "  "
format-muted-prefix-foreground = "#ff0000"
format-muted-foreground = ${colors.foreground}
format-muted-background = ${colors.background}

################################################################################

[module/weather]
type = custom/script
interval = 10
format = <label>
format-prefix = " "
format-prefix-foreground = #3EC13F
format-underline = #3EC13F
format-foreground = ${colors.foreground}
format-background = ${colors.background}
exec = python -u ~/.config/polybar/scripts/weather.py
tail = true

#################################################################################

[module/wired-network]
;https://github.com/jaagr/polybar/wiki/Module:-network
type = internal/network
interface = enp3s0
;interface = enp14s0
interval = 3.0

; Available tokens:
;   %ifname%    [wireless+wired]
;   %local_ip%  [wireless+wired]
;   %essid%     [wireless]
;   %signal%    [wireless]
;   %upspeed%   [wireless+wired]
;   %downspeed% [wireless+wired]
;   %linkspeed% [wired]
; Default: %ifname% %local_ip%
label-connected =  %ifname%
label-disconnected = %ifname% disconnected

format-connected-foreground = ${colors.foreground}
format-connected-background = ${colors.background}
format-connected-underline = #55aa55
format-connected-prefix = " "
format-connected-prefix-foreground = #55aa55
format-connected-prefix-background = ${colors.background}

format-disconnected = <label-disconnected>
format-disconnected-underline = ${colors.alert}
label-disconnected-foreground = ${colors.foreground}

################################################################################

[module/wireless-network]
;https://github.com/jaagr/polybar/wiki/Module:-network
type = internal/network
interface = ${env:WIRELESS}
interval = 3.0
label-connected = %essid%

format-connected = <label-connected>
;format-connected = <ramp-signal> <label-connected>
format-connected-foreground = ${colors.foreground}
format-connected-background = ${colors.background}
format-connected-prefix = "  "
format-connected-prefix-foreground = #7e52c6
format-connected-prefix-background = ${colors.background}
format-connected-underline = #7e52c6

label-disconnected = %ifname% disconnected
label-disconnected-foreground = ${colors.alert}
label-disconnected-background = ${colors.background}

format-disconnected = <label-disconnected>
format-disconnected-foreground = ${colors.alert}
format-disconnected-background = ${colors.background}
format-disconnected-prefix = "  "
format-disconnected-prefix-foreground = ${colors.alert}
format-disconnected-prefix-background = ${colors.background}
format-disconnected-underline =${colors.alert}

ramp-signal-0 = ▁
ramp-signal-1 = ▂
ramp-signal-2 = ▃
ramp-signal-3 = ▄
ramp-signal-4 = ▅
ramp-signal-5 = ▆
ramp-signal-6 = ▇
ramp-signal-7 = █
ramp-signal-foreground = #7e52c6

################################################################################

[module/workspaces-xmonad]
type = custom/script
exec = tail -F /tmp/.xmonad-workspace-log
exec-if = [ -p /tmp/.xmonad-workspace-log ]
tail = true

################################################################################

[module/xbacklight]
;https://github.com/jaagr/polybar/wiki/Module:-xbacklight
type = internal/xbacklight
format = <label> <bar>
format-prefix = "   "
format-prefix-foreground = ${colors.foreground}
format-prefix-background = ${colors.background}
format-prefix-underline = #9f78e1
format-underline = #9f78e1
label = %percentage%%
bar-width = 10
bar-indicator = 
bar-indicator-foreground = #fff
bar-indicator-font = 2
bar-fill = 
bar-fill-font = 2
bar-fill-foreground = #9f78e1
bar-empty = 
bar-empty-font = 2
bar-empty-foreground = #fff
format-foreground = ${colors.foreground}
format-background = ${colors.background}

################################################################################

[module/xkeyboard]
;https://github.com/jaagr/polybar/wiki/Module:-xkeyboard
type = internal/xkeyboard
blacklist-0 = num lock

format-prefix = " "
format-prefix-foreground = ${colors.foreground}
format-prefix-background = ${colors.background}
format-prefix-underline = #3ecfb2
format-foreground = ${colors.foreground}
format-background = ${colors.background}

label-layout = %layout%
label-layout-underline = #3ecfb2
label-indicator-padding = 2
label-indicator-margin = 1
label-indicator-background = ${colors.background}
label-indicator-underline = ${colors.foreground}


################################################################################

[module/xmenu]
type = custom/script
interval = 1200
exec = echo "  "
click-left = "sh /home/dt/xmenu/xmenu.sh"
format-foreground = ${colors.foreground}
format-background = ${colors.background}
################################################################################

[module/xwindow]
;https://github.com/jaagr/polybar/wiki/Module:-xwindow
type = internal/xwindow

; Available tokens:
;   %title%
; Default: %title%
label = %title%
label-maxlen = 50

format-prefix = "    "
;format-foreground = ${colors.foreground}
format-foreground = <<color(c="green")>>
format-background = ${colors.background}

###############################################################################
# vim:ft=dosini
#+end_src
* LF

#+begin_src conf :tangle ~/.config/lf/lfrc
# Basic vars
set shell bash
set shellopts '-eu'
set ifs "\n"
set scrolloff 10
set color256
set icons
set period 1

# Vars that depend on environmental variables
$lf -remote "send $id set previewer ${XDG_CONFIG_HOME:-$HOME/.config}/lf/scope"

# cmds/functions
cmd open ${{
    case $(file --mime-type $f -b) in
	image/vnd.djvu|application/pdf|application/octet-stream) setsid zathura $fx >/dev/null 2>&1 & ;;
    	text/troff) man ./ $f;;
        text/*) $EDITOR $fx;;
	image/x-xcf|image/svg+xml) setsid gimp $f >/dev/null 2>&1 & ;;
	image/*) rotdir $f | grep -i "\.\(png\|jpg\|jpeg\|gif\|webp\)\(_large\)*$" | setsid sxiv -aio 2>/dev/null | lf-select & ;;
	audio/*) mpv $f ;;
	video/*) setsid mpv $f -quiet >/dev/null 2>&1 & ;;
	application/pdf) setsid zathura $fx >/dev/null 2>&1 & ;;
        ,*) for f in $fx; do setsid $OPENER $f >/dev/null 2>&1 & done;;
    esac
}}

cmd mkdir $mkdir -p "$(echo $* | tr ' ' '\ ')"

cmd delete ${{
	clear; tput cup $(($(tput lines)/3)); tput bold
	set -f
	printf "%s\n\t" "$fx"
	printf "delete?[y/N]"
	read ans
	[ $ans = "y" ] && rm -rf $fx
}}

cmd moveto ${{
	clear; tput cup $(($(tput lines)/3)); tput bold
	set -f
	clear; echo "Move to where?"
	dest="$(cut -d'	' -f2- ${XDG_CONFIG_HOME:-$HOME/.config}/directories | fzf)" &&
	eval mv -iv $fx $dest &&
	notify-send "🚚 File(s) moved." "File(s) moved to $dest."
}}

cmd copyto ${{
	clear; tput cup $(($(tput lines)/3)); tput bold
	set -f
	clear; echo "Copy to where?"
	dest="$(cut -d'	' -f2- ${XDG_CONFIG_HOME:-$HOME/.config}/directories | fzf)" &&
	eval cp -ivr $fx $dest &&
	notify-send "📋 File(s) copied." "File(s) copies to $dest."
}}

cmd bulkrename ${{
    vidir
}}

# Bindings
map <c-f> $lf -remote "send $id select '$(fzf)'"
map J $lf -remote "send $id cd $(cut -d'	' -f2 ${XDG_CONFIG_HOME:-$HOME/.config}/directories | fzf)"
map D delete
map C copyto
map M moveto
map S $$SHELL
map <c-n> push :mkdir<space>
map <c-r> reload
map <enter> shell
map x $$f
map X !$f
map o &mimeopen $f
map O $mimeopen --ask $f

map A rename # at the very end
map c push A<c-u> # new rename
map I push A<c-a> # at the very beginning
map i push A<a-b><a-b><a-f> # before extention
map a push A<a-b> # after extention
map b bulkrename

map <c-e> down
map <c-y> up
map V push :!nvim<space>

map gc. cd ~/.config/
map gcb $nvim ~/.config/bspwm/bspwmrc
map gcs $nvim ~/.config/sxhkd/sxhkdrc
map gcl $nvim ~/.config/lf/lfrc

map gl. cd ~/.local
map glz cd ~/.local/share/zup/

map go. cd ~/Documents/org/
map goc cd ~/Documents/org/chalmers

map git cd /storage/git/

map gs. cd /storage/
map gsd  cd /storage/Downloads/
map gst  cd /storage/Downloads/torrents
#+end_src

* ncspot
#+begin_src conf :tangle ~/.config/ncspot/config.toml
[keybindings]
"Ctrl+d" = "move down 5"
"Ctrl+u" = "move up 5"
"d" = "move down 5"
"u" = "move up 5"
"D" = "delete"
"w" = "play"
"L" = "open selected"
"H" = "back"

[theme]
background = "black"
primary = "light white"
secondary = "light black"
title = "green"
playing = "green"
playing_selected = "light green"
playing_bg = "black"
highlight = "light white"
highlight_bg = "#484848"
error = "light white"
error_bg = "red"
statusbar = "black"
statusbar_progress = "green"
statusbar_bg = "green"
cmdline = "light white"
cmdline_bg = "black"
search_match = "light red"
#+end_src
* Scripts
** dmenupass
This script is the =SUDO_ASKPASS= environment variable, meaning that it will be used as a password prompt if needed.

#+begin_src sh :tangle ~/.local/bin/dmenupass :tangle-mode (identity #o755) :noweb yes
#!/bin/sh

dmenu -sb "<<color(c="warning")>>" -nf "<<color(c="bg")>>" -nb "<<color(c="bg")>>" -p "$1" <&- && echo
#+end_src

#+RESULTS:

** Sxhkd Keybindings Helper
#+begin_src sh :tangle ~/.local/bin/sxhkd-help :tangle-mode (identity #o755) :noweb yes
#!/bin/bash

awk '/^[a-z]/ && last {print "",$0,"\t",last,""} {last=""} /^#/{last=$0}' ~/.config/sxhkd/sxhkdrc |
    column -t -s $'\t' |
    dmenu -l 50 -i -p "Keybindings:"
#+end_src

#+RESULTS:

** Sxhkd tabbed
#+begin_src sh :tangle ~/.local/bin/sxhkd-tabbed :tangle-mode (identity #o755) :noweb yes
#!/bin/sh
## alltab-bspwm.sh brings tabbing functionality to bspwm.
## It relies on tabbed, xdotool, and xwininfo.

currentWID=$(bspc query -N -n focused)
case $1 in
    east|north|south|west)  targetWID=$(bspc query -N -n $1) || exit 1
                            if bspc query -T -n focused | grep -q tabbed ; then
                                if bspc query -T -n $1 | grep -q tabbed ; then
                                    if [ $(xwininfo -id $currentWID -children | wc -l) -eq 9 ] ; then
                                        xdotool windowreparent $(xwininfo -id $currentWID -children | awk 'NR==8 {print $1}') $(xwininfo -root | awk '/Window id:/ {print $4}')
                                    fi
                                    xdotool windowreparent $(xwininfo -id $currentWID -children | awk 'NR==7 {print $1}') $targetWID
                                else
                                    bspc config -n $targetWID border_width 0
                                    xdotool windowreparent $targetWID $currentWID
                                fi
                            elif bspc query -T -n $1 | grep -q tabbed ; then
                                bspc config -n $currentWID border_width 0
                                xdotool windowreparent $currentWID $targetWID
                            else
                                tabbedWID=$(tabbed -c -d | tail -n 1)
                                bspc config -n $currentWID border_width 0
                                bspc config -n $targetWID border_width 0
                                xdotool windowreparent $currentWID $tabbedWID
                                xdotool windowreparent $targetWID $tabbedWID
                            fi ;;
    detach)    if bspc query -T -n focused | grep -q tabbed ; then
                   rootWID=$(xwininfo -root | awk '/Window id:/ {print $4}')
                   if [ $(xwininfo -id $currentWID -children | wc -l) -eq 9 ] ; then
                       xdotool windowreparent $(xwininfo -id $currentWID -children | awk 'NR==8 {print $1}') $rootWID
                   fi
                   xdotool windowreparent $(xwininfo -id $currentWID -children | awk 'NR==7 {print $1}') $rootWID
               fi ;;
    *)    echo "Usage: ./alltab-bspwm.sh [east|north|south|west|detach]"
          echo "You probably want to add something like this to your sxhkdrc file:"
          echo "# Tabbing functionality for bspwm"
          echo "super + t; {h,j,k,l,d}"
          echo "    /path/to/alltab-bspwm.sh {west,south,north,east,detach}" ;;
esac
#+end_src
** Swallow
#+begin_src sh :tangle ~/.local/bin/swallow :tangle-mode (identity #o755) :noweb yes
#!/bin/sh

$("$@") > /dev/null 2>&1 &
sleep 0.5
bspc node -s last.local
bspc node -f last.local
id=$(xdo id)
xdo hide
wait
xdo show "$id"
#+end_src

** Open window in floating
Open a command in float mode.

#+begin_src sh :tangle ~/.local/bin/bspwmfloat :tangle-mode (identity #o755) :noweb yes
#!/bin/bash
bspc rule -a \* -o state=floating && $@
#+end_src

*** Example Usage
#+begin_src sh
bspwmfloat alacritty -e ncspot
#+end_src

* dmenu
#+begin_src c :tangle ~/.local/src/dmenu/config.h :noweb yes
static int topbar = 1;                      /* -b  option; if 0, dmenu appears at bottom     */
/* -fn option overrides fonts[0]; default X11 font or font set */
static const char *fonts[] = {
	"monospace:size=10",
	"JoyPixels:pixelsize=10:antialias=true:autohint=true"
};
static const unsigned int bgalpha = 0xe0;
static const unsigned int fgalpha = OPAQUE;
static const char *prompt      = NULL;      /* -p  option; prompt to the left of input field */
static const char *colors[SchemeLast][2] = {
	/*              fg         bg       */
	[SchemeNorm] = { "<<color(c="fg")>>", "<<color(c="bg")>>" },
	[SchemeSel] = { "<<color(c="bg")>>", "<<color(c="highlight")>>" },
	[SchemeOut] = { "#000000", "#00ffff" },
};
static const unsigned int alphas[SchemeLast][2] = {
	/*		fgalpha		bgalphga	*/
	[SchemeNorm] = { fgalpha, bgalpha },
	[SchemeSel] = { fgalpha, bgalpha },
	[SchemeOut] = { fgalpha, bgalpha },
};

/* -l option; if nonzero, dmenu uses vertical list with given number of lines */
static unsigned int lines      = 0;

/*
 * Characters not considered part of a word while deleting words
 * for example: " /?\"&[]"
 */
static const char worddelimiters[] = " ";
#+end_src

** download
#+begin_src sh :dir ~/.local/src/ :results output
stat dmenu/.git || git clone https://git.suckless.org/dmenu
#+end_src

** build & install

#+begin_src sh :dir ~/.local/src/dmenu :results output
make clean
make all
sudo make install
#+end_src

* LARBS
My dotfiles are the dotfiles deployed by [LARBS](https://larbs.xyz) and as seen on Luke's [my YouTube channel](https://youtube.com/c/lukesmithxyz).

** Message from Luke
- Very useful scripts are in `~/.local/bin/`
- Settings for:
  - vim/nvim (text editor)
  - zsh (shell)
  - i3wm/i3-gaps (window manager)
  - i3blocks (status bar)
  - sxhkd (general key binder)
  - ranger (file manager)
  - lf (file manager)
  - mpd/ncmpcpp (music)
  - sxiv (image/gif viewer)
  - mpv (video player)
  - calcurse (calendar program)
  - tmux
  - other stuff like xdg default programs, inputrc and more, etc.
- I try to minimize what's directly in `~` so:
  - All configs that can be in `~/.config/` are.
  - Some environmental variables have been set in `~/.zprofile` to move configs into `~/.config/`
- Bookmarks in text files used by various scripts (like `~/.local/bin/shortcuts`)
  - File bookmarks in `~/.config/files`
  - Directory bookmarks in `~/.config/directories`

*** Want even more?

My setup is pretty modular nowadays.
I use several suckless programs that are meant to be configured and compiled by the user and I also have separate repos for some other things.
Check out their links:

- [dwm](https://github.com/lukesmithxyz/dwm) (the window manager I usually use now which is fully compatible with this repo)
- [st](https://github.com/lukesmithxyz/st) (the terminal emulator assumed to be used by these dotfiles)
- [mutt-wizard (`mw`)](https://github.com/lukesmithxyz/mutt-wizard) - (a terminal-based email system that can store your mail offline without effort)

*** Install these dotfiles

Use [LARBS](https://larbs.xyz) to autoinstall everything:

```
curl -LO larbs.xyz/larbs.sh
```

or clone the repo files directly to your home directory and install [the prerequisite programs](https://github.com/LukeSmithxyz/LARBS/blob/master/progs.csv) or [those required for the i3 setup](https://github.com/LukeSmithxyz/LARBS/blob/master/legacy.csv).
